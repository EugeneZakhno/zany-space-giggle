var h,L,j,S,D,_=-1,g=function(e){addEventListener("pageshow",function(n){n.persisted&&(_=n.timeStamp,e(n))},!0)},k=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},I=function(){var e=k();return e&&e.activationStart||0},d=function(e,n){var t=k(),a="navigate";return _>=0?a="back-forward-cache":t&&(a=document.prerendering||I()>0?"prerender":document.wasDiscarded?"restore":t.type.replace(/_/g,"-")),{name:e,value:n===void 0?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:a}},T=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var a=new PerformanceObserver(function(i){Promise.resolve().then(function(){n(i.getEntries())})});return a.observe(Object.assign({type:e,buffered:!0},t||{})),a}}catch{}},P=function(e,n){var t=function a(i){i.type!=="pagehide"&&document.visibilityState!=="hidden"||(e(i),n&&(removeEventListener("visibilitychange",a,!0),removeEventListener("pagehide",a,!0)))};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},l=function(e,n,t,a){var i,r;return function(o){n.value>=0&&(o||a)&&((r=n.value-(i||0))||i===void 0)&&(i=n.value,n.delta=r,n.rating=function(u,s){return u>s[1]?"poor":u>s[0]?"needs-improvement":"good"}(n.value,t),e(n))}},x=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},E=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},y=-1,R=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},w=function(e){document.visibilityState==="hidden"&&y>-1&&(y=e.type==="visibilitychange"?e.timeStamp:0,Y())},H=function(){addEventListener("visibilitychange",w,!0),addEventListener("prerenderingchange",w,!0)},Y=function(){removeEventListener("visibilitychange",w,!0),removeEventListener("prerenderingchange",w,!0)},B=function(){return y<0&&(y=R(),H(),g(function(){setTimeout(function(){y=R(),H()},0)})),{get firstHiddenTime(){return y}}},Z=function(e,n){n=n||{},E(function(){var t,a=[1800,3e3],i=B(),r=d("FCP"),o=T("paint",function(u){u.forEach(function(s){s.name==="first-contentful-paint"&&(o.disconnect(),s.startTime<i.firstHiddenTime&&(r.value=Math.max(s.startTime-I(),0),r.entries.push(s),t(!0)))})});o&&(t=l(e,r,a,n.reportAllChanges),g(function(u){r=d("FCP"),t=l(e,r,a,n.reportAllChanges),x(function(){r.value=performance.now()-u.timeStamp,t(!0)})}))})},tn=function(e,n){n=n||{},E(function(){var t,a=[.1,.25],i=d("CLS"),r=-1,o=0,u=[],s=function(v){r>-1&&e(v)},c=function(v){v.forEach(function(p){if(!p.hadRecentInput){var W=u[0],X=u[u.length-1];o&&p.startTime-X.startTime<1e3&&p.startTime-W.startTime<5e3?(o+=p.value,u.push(p)):(o=p.value,u=[p]),o>i.value&&(i.value=o,i.entries=u,t())}})},f=T("layout-shift",c);f&&(t=l(s,i,a,n.reportAllChanges),Z(function(v){r=v.value,i.value<0&&(i.value=0,t())}),P(function(){c(f.takeRecords()),t(!0)}),g(function(){o=0,r=-1,i=d("CLS",0),t=l(s,i,a,n.reportAllChanges),x(function(){return t()})}))})},C={passive:!0,capture:!0},$=new Date,N=function(e,n){h||(h=n,L=e,j=new Date,G(removeEventListener),z())},z=function(){if(L>=0&&L<j-$){var e={entryType:"first-input",name:h.type,target:h.target,cancelable:h.cancelable,startTime:h.timeStamp,processingStart:h.timeStamp+L};S.forEach(function(n){n(e)}),S=[]}},U=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(t,a){var i=function(){N(t,a),o()},r=function(){o()},o=function(){removeEventListener("pointerup",i,C),removeEventListener("pointercancel",r,C)};addEventListener("pointerup",i,C),addEventListener("pointercancel",r,C)}(n,e):N(n,e)}},G=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(n){return e(n,U,C)})},rn=function(e,n){n=n||{},E(function(){var t,a=[100,300],i=B(),r=d("FID"),o=function(c){c.startTime<i.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),t(!0))},u=function(c){c.forEach(o)},s=T("first-input",u);t=l(e,r,a,n.reportAllChanges),s&&P(function(){u(s.takeRecords()),s.disconnect()},!0),s&&g(function(){var c;r=d("FID"),t=l(e,r,a,n.reportAllChanges),S=[],L=-1,h=null,G(addEventListener),c=o,S.push(c),z()})})},J=0,A=1/0,b=0,V=function(e){e.forEach(function(n){n.interactionId&&(A=Math.min(A,n.interactionId),b=Math.max(b,n.interactionId),J=b?(b-A)/7+1:0)})},K=function(){return D?J:performance.interactionCount||0},nn=function(){"interactionCount"in performance||D||(D=T("event",V,{type:"event",buffered:!0,durationThreshold:0}))},Q=0,O=function(){return K()-Q},m=[],F={},q=function(e){var n=m[m.length-1],t=F[e.interactionId];if(t||m.length<10||e.duration>n.latency){if(t)t.entries.push(e),t.latency=Math.max(t.latency,e.duration);else{var a={id:e.interactionId,latency:e.duration,entries:[e]};F[a.id]=a,m.push(a)}m.sort(function(i,r){return r.latency-i.latency}),m.splice(10).forEach(function(i){delete F[i.id]})}},an=function(e,n){n=n||{},E(function(){var t=[200,500];nn();var a,i=d("INP"),r=function(u){u.forEach(function(f){f.interactionId&&q(f),f.entryType==="first-input"&&!m.some(function(v){return v.entries.some(function(p){return f.duration===p.duration&&f.startTime===p.startTime})})&&q(f)});var s,c=(s=Math.min(m.length-1,Math.floor(O()/50)),m[s]);c&&c.latency!==i.value&&(i.value=c.latency,i.entries=c.entries,a())},o=T("event",r,{durationThreshold:n.durationThreshold||40});a=l(e,i,t,n.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),P(function(){r(o.takeRecords()),i.value<0&&O()>0&&(i.value=0,i.entries=[]),a(!0)}),g(function(){m=[],Q=K(),i=d("INP"),a=l(e,i,t,n.reportAllChanges)}))})},M={},on=function(e,n){n=n||{},E(function(){var t,a=[2500,4e3],i=B(),r=d("LCP"),o=function(c){var f=c[c.length-1];if(f){var v=Math.max(f.startTime-I(),0);v<i.firstHiddenTime&&(r.value=v,r.entries=[f],t())}},u=T("largest-contentful-paint",o);if(u){t=l(e,r,a,n.reportAllChanges);var s=function(){M[r.id]||(o(u.takeRecords()),u.disconnect(),M[r.id]=!0,t(!0))};["keydown","click"].forEach(function(c){addEventListener(c,s,{once:!0,capture:!0})}),P(s,!0),g(function(c){r=d("LCP"),t=l(e,r,a,n.reportAllChanges),x(function(){r.value=performance.now()-c.timeStamp,M[r.id]=!0,t(!0)})})}})},en=function e(n){document.prerendering?E(function(){return e(n)}):document.readyState!=="complete"?addEventListener("load",function(){return e(n)},!0):setTimeout(n,0)},cn=function(e,n){n=n||{};var t=[800,1800],a=d("TTFB"),i=l(e,a,t,n.reportAllChanges);en(function(){var r=k();if(r){var o=r.responseStart;if(o<=0||o>performance.now())return;a.value=Math.max(o-I(),0),a.entries=[r],i(!0),g(function(){a=d("TTFB",0),(i=l(e,a,t,n.reportAllChanges))(!0)})}})};export{tn as getCLS,Z as getFCP,rn as getFID,an as getINP,on as getLCP,cn as getTTFB,tn as onCLS,Z as onFCP,rn as onFID,an as onINP,on as onLCP,cn as onTTFB};
